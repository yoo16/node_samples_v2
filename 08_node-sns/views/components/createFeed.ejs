<div class="p-4 bg-white rounded-lg shadow-md dark:bg-slate-800">
  <form action="/feed/add" method="post" class="space-y-4">
    <input type="hidden" name="user_id" value="<%= authUser.id %>">

    <div class="flex items-start space-x-4">
      <div class="flex-shrink-0">
        <img
          class="avatar w-10 h-10 rounded-full object-cover"
          src="<%= authUser.avatar_url || '/images/no-avatar.png' %>">
      </div>

      <div class="flex-1">
        <textarea id="content" name="content"
          class="w-full p-2 text-base bg-transparent border-0 rounded-md resize-none focus:ring-0 text-slate-800 dark:text-slate-100 placeholder-slate-500"
          placeholder="いま何してる？" rows="3"></textarea>

        <div class="flex items-center justify-end pt-2 border-t border-slate-100 dark:border-slate-700">
          <button id="post-button" type="submit" disabled
            class="px-6 py-1.5 text-sm font-semibold text-white bg-sky-600 rounded-full hover:bg-sky-700 disabled:opacity-50 disabled:bg-sky-600 disabled:cursor-not-allowed transition-all">
            Post
          </button>
        </div>
      </div>
    </div>
  </form>
</div>

<script>
  const handleChangeInput = () => {
    const content = document.getElementById('content').value;
    document.getElementById('post-button').disabled = content.trim() === '';
    document.getElementById('post-button').classList.toggle('opacity-50', content.trim() === '');
  };

  document.getElementById('content').addEventListener('input', handleChangeInput);
</script>